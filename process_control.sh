#!/bin/bash

# Очистим логи перед началом (на случай повторных запусков)
> output1.log
> output2.log

# 1. Запуск трех процессов
# Процесс 1: Запись даты в файл output1.log каждые 3 секунды
# Процесс 2: Вывод случайных чисел в терминал каждые 5 секунд
# Процесс 3: Запись "Hello from process 3" в файл output2.log каждые 2 секунды

# Запустим их в фоне, используя &
./process1.sh &
./process2.sh &
./process3.sh &

# Дадим немного времени процессам стартовать
sleep 2

# Найдем PID процессов. Предполагается, что имена скриптов уникальны
PID1=$(pgrep -f process1.sh)
PID2=$(pgrep -f process2.sh)
PID3=$(pgrep -f process3.sh)

echo "Запущены процессы:"
echo "Process1 PID: $PID1"
echo "Process2 PID: $PID2"
echo "Process3 PID: $PID3"

# 2. Приостановить второй процесс, возобновить через 10 секунд
echo "Приостанавливаем второй процесс (PID: $PID2)"
kill -STOP $PID2

echo "Ждем 10 секунд..."
sleep 10

echo "Возобновляем второй процесс в фоне"
kill -CONT $PID2

# 3. Изменить приоритет третьего процесса на более низкий
echo "Изменяем приоритет третьего процесса (PID: $PID3) на +10"
renice +10 -p $PID3

# 4. После 30 секунд работы всех трех процессов – завершить их
echo "Ждем 30 секунд..."
sleep 30

echo "Завершаем процессы..."
kill $PID1
kill $PID2
kill $PID3

echo "Все процессы остановлены."
